!function(a){"use strict";function b(b,f){function g(a){var b=x.getOptions().keyCodeForClosing;"number"==typeof b&&(x.setOptions({keyCodeForClosing:[b]}),b=x.getOptions().keyCodeForClosing);for(var c=0;c<b.length;c++)a.keyCode===b[c]&&x.close.call(x,x.getOptions().forceClosing.keydown)}function s(b){var c=a(b.target);x.getOptions().isOuterClickClosing&&0===c.parents(".js-goodpopup-inner-content").length&&!c.hasClass(h)&&x.close.call(x,x.getOptions().forceClosing.click)}var v,w,x=this,y=b.attr("id"),z=a.extend(!0,{},f),A=!1,B=!1;return this.open=function(){if(n)if(this.isRendered()){if(!this.isHided())return this;a.each(o,function(a,b){if(b.isRendered()&&!b.isHided())return b._hide(function(){x.getOptions().callbackBeforeOpen.call(x),x._show.call(x)}),!1})}else a.each(o,function(a,b){if(b.isRendered()&&!b.isHided())return b._hide(function(){x.getOptions().callbackBeforeOpen.call(x),x._renderContent.call(x)}),!1});else x.getOptions().callbackBeforeOpen.call(x),x._renderContent.call(x);return this},this.close=function(a){if(!n||!this.isRendered())return this;var b=a||!1;if(p.length>0)if(b){for(var c=p.length;c>0;c--)p[c-1]._destroyContent(!1);this._destroyContent(!0)}else this._destroyContent(!1,function(){p[p.length-1].getOptions().callbackBeforeOpen.call(p[p.length-1]),p[p.length-1]._show.call(p[p.length-1])});else this._destroyContent(!0);return this},this.isRendered=function(){return A},this.isHided=function(){return B},this.setOptions=function(b){return a.isPlainObject(b)?b.hasOwnProperty("forceClosing")&&!a.isPlainObject(b.forceClosing)?r(y,"WRONG_OPTIONS",b):(b.hasOwnProperty("hasCloseButton")&&b.hasCloseButton!=x.getOptions().hasCloseButton&&x.getPopupContent()&&(b.hasCloseButton?(w.append(t),v=w.find("."+h),v.on("click."+e,function(){x.close.call(x,x.getOptions().forceClosing.button)})):(v&&0!==v.length||(v=w.find("."+h)),v.remove())),a.extend(!0,z,b),this):r(y,"WRONG_OPTIONS",b)},this.getOptions=function(){return z},this.getPopupContent=function(){return w},this.getPopupId=function(){return y},this._renderContent=function(){if(this.isRendered()&&!x.getOptions().isIframe&&!x.getOptions().isPrerendered)return this;var f=function(){if(v=w.find("."+h),v.on("click."+e,function(){x.close.call(x,x.getOptions().forceClosing.button)}),a(document).off("keydown."+e).on("keydown."+e,g),c.off("click."+e).on("click."+e,s),n){var b=function(){x.getOptions().callbackAfterOpen.call(x)};q.whichTransitionEvent&&w.off(q.whichTransitionEvent+".pluginSuffix").on(q.whichTransitionEvent+".pluginSuffix",function(a){a.target===w[0]&&(w.off(q.whichTransitionEvent+".pluginSuffix"),b.call(x))}),setTimeout(function(){w.removeClass(m)},1),q.whichTransitionEvent||b.call(x),A=!0,B=!1,n=!0}else{var b=function(){x.getOptions().callbackAfterOpen.call(x)};a("html").addClass("noscroll"),q.whichTransitionEvent&&c.off(q.whichTransitionEvent+".pluginSuffix").on(q.whichTransitionEvent+".pluginSuffix",function(a){a.target===c[0]&&(c.off(q.whichTransitionEvent+".pluginSuffix"),b.call(x))}),c.addClass(i),q.whichTransitionEvent||b.call(x),A=!0,B=!1,n=!0}};return x.getOptions().isPrerendered||(x.getOptions().isDetachable||x.getOptions().isIframe?"undefined"==typeof w&&(w=a(u(b.html(),x.getOptions().data,x.getOptions().hasCloseButton))):w=a(u(b.html(),x.getOptions().data,x.getOptions().hasCloseButton))),n&&w.addClass(m),!x.getOptions().isPrerendered&&!x.getOptions().isIframe||x.getOptions().isIframe&&!this.isRendered()?d.append(w).promise().done(function(){f.call(x)}):(x.getOptions().isPrerendered&&this.setOptions({isPrerendered:!1}),w.removeClass(k+" "+l),f.call(x)),this},this._rerenderContent=function(c){var d=w;return v.off("click."+e),w=a(u(b.html(),x.getOptions().data,x.getOptions().hasCloseButton)),w.addClass(k+" "+l),d.after(w).promise().done(function(){d.remove(),v=w.find("."+h),"function"==typeof c&&c()}),this},this._destroyContent=function(b,d){if(!x.isRendered())return this;x.getOptions().callbackBeforeClose.call(x);for(var f=0;f<p.length;f++)if(p[f]===this){p.splice(f,1);break}if("undefined"!=typeof b&&b){var g=function(){x.getOptions().isIframe?w.addClass(k+" "+l).removeClass(j):x.getOptions().isDetachable?w.detach().removeClass(k+" "+l+" "+m+" "+j):(w.remove(),w=void 0),x.getOptions().callbackAfterClose.call(x)};c.off("click."+e),a(document).off("keydown."+e),v.off("click."+e),q.whichTransitionEvent&&c.off(q.whichTransitionEvent+".pluginSuffix").on(q.whichTransitionEvent+".pluginSuffix",function(a){a.target===c[0]&&(c.off(q.whichTransitionEvent+".pluginSuffix"),g.call(x))}),c.removeClass(i),q.whichTransitionEvent||g.call(x),a("html").removeClass("noscroll"),n=!1,B=!1,x.getOptions().isIframe||(A=!1)}else{var g=function(){x.getOptions().isIframe?w.addClass(k+" "+l).removeClass(j):x.getOptions().isDetachable?w.detach().removeClass(k+" "+l+" "+m+" "+j):(w.remove(),w=void 0),x.getOptions().callbackAfterClose.call(x),"function"==typeof d&&d()};v.off("click."+e),B?(B=!1,x.getOptions().isIframe||(A=!1),g.call(x)):(q.whichTransitionEvent&&w.off(q.whichTransitionEvent+".pluginSuffix").on(q.whichTransitionEvent+".pluginSuffix",function(a){a.target===w[0]&&(w.off(q.whichTransitionEvent+".pluginSuffix"),g.call(x))}),w.addClass(j),q.whichTransitionEvent||g.call(x),B=!1,x.getOptions().isIframe||(A=!1))}return this},this._show=function(){function b(){var b=function(){a(document).off("keydown."+e).on("keydown."+e,g),c.off("click."+e).on("click."+e,s),v.off("click."+e).on("click."+e,function(){x.close.call(x,x.getOptions().forceClosing.button)}),x.getOptions().callbackAfterOpen.call(x)};q.whichTransitionEvent&&w.off(q.whichTransitionEvent+".pluginSuffix").on(q.whichTransitionEvent+".pluginSuffix",function(a){a.target===w[0]&&(w.off(q.whichTransitionEvent+".pluginSuffix"),b.call(x))}),setTimeout(function(){w.removeClass(l+" "+k)},1),q.whichTransitionEvent||b.call(x),B=!1}if(!B)return this;for(var d=0;d<p.length;d++)if(p[d]===this){p.splice(d,1);break}return x.getOptions().isDetachable||x.getOptions().isIframe?b.call(x):x._rerenderContent.call(x,function(){b.call(x)}),this},this._hide=function(b){function d(){w.addClass(l),x.getOptions().callbackAfterClose.call(x),"function"==typeof b&&b()}return B?this:(x.getOptions().callbackBeforeClose.call(x),a(document).off("keydown."+e),c.off("click."+e),v.off("click."+e),q.whichTransitionEvent&&w.off(q.whichTransitionEvent+".pluginSuffix").on(q.whichTransitionEvent+".pluginSuffix",function(a){a.target===w[0]&&(w.off(q.whichTransitionEvent+".pluginSuffix"),d.call(x))}),w.addClass(k),q.whichTransitionEvent||d.call(x),p.push(x),B=!0,this)},x.getOptions().isPrerendered&&(w=a(u(b.html(),x.getOptions().data,x.getOptions().hasCloseButton)),v=w.find("."+h),w.addClass(k+" "+l),d.append(w),A=!0,B=!0),b.data("goodpopup",this),this}var c,d,e="goodpopup",f=".js-goodpopup",g=".js-goodpopup-inner-content",h="js-goodpopup-close",i="goodpopup_visible",j="goodpopup-inner-content_destroyed",k="goodpopup-inner-content-element_hided",l="goodpopup-inner-content-element_hidedfull",m="goodpopup-inner-content-element_pseudohided",n=!1,o={},p=[],q={isSVGSupported:function(){function a(){var a=document.createElement("div");return a.innerHTML="<svg/>","http://www.w3.org/2000/svg"==(a.firstChild&&a.firstChild.namespaceURI)}return!!("object"==typeof Modernizr&&"boolean"==typeof Modernizr.inlinesvg&&Modernizr.inlinesvg||a())}(),whichTransitionEvent:function(){var a,b=document.createElement("div"),c={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd",WebkitTransition:"webkitTransitionEnd"};for(a in c)if("undefined"!=typeof b.style[a])return c[a];return!1}()},r=function(b,c,d){function e(a){"undefined"!=typeof console&&"function"==typeof console.error?console.error(a):alert(a)}function f(a){"undefined"!=typeof console&&"function"==typeof console.trace?console.trace(a):alert(a)}switch(c){case"NOT_FOUND":var g=a("#"+b);return g.length>0?(e("Please initialize popup `"+b+"`: `$('#"+b+"').goodpopup();`"),g):(e("Popup template `"+b+"` doesn't exist"),b);case"WRONG_OPTIONS":return e("Wrong options object in method `setOptions` on popup `"+b+"`"),d;default:return f("Problem with popup"),b}},s=function(){var b='<div class="goodpopup js-goodpopup"><div class="goodpopup-inner"><div class="goodpopup-inner-content js-goodpopup-inner-content"></div></div></div>';return a(b).appendTo("body").promise().done(function(){c=a(f),d=c.find(g)})},t='<span class="goodpopup-close js-goodpopup-close">'+(q.isSVGSupported?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" enable-background="new 0 0 16 16" class="goodpopup-close-svg"><path class="goodpopup-close-svg__path" d="m15.8 13.5l-5.4-5.5 5.5-5.4c.2-.2.2-.6 0-.8l-1.6-1.6c-.1-.1-.3-.2-.4-.2-.2 0-.3.1-.4.2l-5.5 5.4-5.5-5.4c-.1-.1-.2-.2-.4-.2s-.3.1-.4.2l-1.5 1.5c-.2.2-.2.6 0 .8l5.4 5.5-5.5 5.5c0 .1-.1.2-.1.4 0 .2.1.3.2.4l1.6 1.6c.1.1.2.1.4.1.1 0 .3-.1.4-.2l5.4-5.4 5.4 5.5c.1.1.3.2.4.2.1 0 .3-.1.4-.2l1.6-1.6c.1-.1.2-.3.2-.4 0-.2-.1-.3-.2-.4"></path></svg>':'<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAAtElEQVRIx6WVyxXFIAgFbwkpkRLSiSVQkiXxFvm+HIGruFOYWYQAAABs6DAI2NNg6Niu64EbDI3C9cw+FQ9uMCiN34o3niv0k93xeYgVOshGoxUjvHkBpfD9CkqqGOF/ZY8VKR4rKNxX0LinmMA5RdoxUsNjBd2vUsPHhWM6NcRphYYfUWs1SBXcj6Qz+O680p3gRSZ6kVLkAyVUyPJIEx4PFOWxXl4s5dX2VujKcn0UurLef0f+APbXjsH9AAAAAElFTkSuQmCC" alt="" class="goodpopup-close__png"/>')+"</span>",u=function(a,b,c){return'<div class="goodpopup-inner-content-element">'+Handlebars.compile(a)("object"!=typeof b?{}:b)+(c?t:"")+"</div>"},v={callbackBeforeOpen:function(){},callbackAfterOpen:function(){},callbackBeforeClose:function(){},callbackAfterClose:function(){},isPrerendered:!1,isIframe:!1,isDetachable:!1,isOuterClickClosing:!0,hasCloseButton:!0,keyCodeForClosing:27,forceClosing:{click:!0,keydown:!0,button:!1},data:{}};a.fn.goodpopup=function(c){return this.each(function(d,e){var f=a(e),g=f.attr("id"),h=o[g],i=a.extend(!0,{},v,c,f.data());"undefined"==typeof h?o[g]=new b(f,i):h.setOptions(c)})},a.goodpopup=function(a){return"undefined"!=typeof o[a]?o[a]:"undefined"!=typeof a?r(a,"NOT_FOUND"):this},a.goodpopup.getPopups=function(){return o},a.goodpopup.version="2.0.0-beta.13";var w=function(){a("script[type='text/x-handlebars-template']").goodpopup()};a(function(){s().done(w)})}(jQuery);
//# sourceMappingURL=script.min.js.map