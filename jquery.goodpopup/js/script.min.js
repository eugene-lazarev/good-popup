!function(e){"use strict";var n,t,o,p="goodpopup",i="js-goodpopup-close",s="goodpopup-close__png",u="goodpopup_visible",r="goodpopup-inner-content_destroyed",l="goodpopup-inner-content-element_withclosebutton",d="goodpopup-inner-content-element_fullwidth",c="goodpopup-inner-content-element_hided",a="goodpopup-inner-content-element_hidedfull",g="goodpopup-inner-content-element_pseudohided",f="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAIVBMVEUAAAD////////////////////////////////////////PIev5AAAACnRSTlMAMO9gn88Q369Agi28KgAAAQtJREFUeAGl10FOw1AMRVEnaZLi/S8YoY/0ACMOUt/w1+cOOqlaa9ve51X/3nX2vVX24ftrwb573757FIZfhfhV2MqrbfkUls8TNs7z4MI8//Hgwjw/u10YPufV7cL0WT1RgO+6Thf+8M9CAf5RhQL9+ggFeBTgUYBHgR6FPupzR8OjAI8CPAvyLsC7AM+CvQvza0GBHgV77LB3wd4FexfsXbB/PWDvgr0L9i7Ys2Df/faCxy8vPArwKMCjIH8cKMhXoUCPAj0K9CjYo2CPgj0K9tnjtwI9Cudl74I9Crc8CkWPQu3wKNy17fCzMP402c9CfAr2KcSnAD8K8SnQpxCfgn0K8Sns9inEvwMkUkuut7bS3AAAAABJRU5ErkJggg==",h="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAIVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABt0UjBAAAACnRSTlMAMO9gn88Q369Agi28KgAAAQtJREFUeAGl10FOw1AMRVEnaZLi/S8YoY/0ACMOUt/w1+cOOqlaa9ve51X/3nX2vVX24ftrwb573757FIZfhfhV2MqrbfkUls8TNs7z4MI8//Hgwjw/u10YPufV7cL0WT1RgO+6Thf+8M9CAf5RhQL9+ggFeBTgUYBHgR6FPupzR8OjAI8CPAvyLsC7AM+CvQvza0GBHgV77LB3wd4FexfsXbB/PWDvgr0L9i7Ys2Df/faCxy8vPArwKMCjIH8cKMhXoUCPAj0K9CjYo2CPgj0K9tnjtwI9Cudl74I9Crc8CkWPQu3wKNy17fCzMP402c9CfAr2KcSnAD8K8SnQpxCfgn0K8Sns9inEvwMkUkuut7bS3AAAAABJRU5ErkJggg==",C=!1,A={},P=[],O=0,v={isSVGSupported:!!("object"==typeof Modernizr&&"boolean"==typeof Modernizr.inlinesvg&&Modernizr.inlinesvg||((o=document.createElement("div")).innerHTML="<svg/>","http://www.w3.org/2000/svg"===(o.firstChild&&o.firstChild.namespaceURI))),whichTransitionEvent:function(){var e,n=document.createElement("div"),t={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd",WebkitTransition:"webkitTransitionEnd"};for(e in t)if("undefined"!=typeof n.style[e])return t[e];return!1}(),calculateScrollbarWidth:function(){var n,t,o,p;n=e("<div>").css("position","absolute").css("visibility","hidden").css("width","100px").css("msOverflowStyle","scrollbar"),e("body").append(n).promise().done(function(){o=n.outerWidth(),n.css("overflow","scroll"),t=e("<div>").css("width","100%"),n.append(t).promise().done(function(){p=t.innerWidth(),n.remove(),O=o-p})})},throwError:function(n,t,o){function p(e){"undefined"!=typeof console&&"function"==typeof console.error?console.error(e):alert(e)}switch(t){case"NOT_FOUND":var i=e("#"+n);return i.length>0?(p("Please initialize popup `"+n+"`: `$('#"+n+"').goodpopup();`"),i):(p("Popup template `"+n+"` doesn't exist"),n);case"WRONG_OPTIONS":return p("Wrong options object in method `setOptions` on popup `"+n+"`"),o;default:return s="Problem with popup","undefined"!=typeof console&&"function"==typeof console.trace?console.trace(s):alert(s),n}var s}},I={closeButtonMarkup:function(e){return'<span class="goodpopup-close js-goodpopup-close">'+(v.isSVGSupported?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" enable-background="new 0 0 16 16" class="goodpopup-close-svg"><path class="goodpopup-close-svg__path" d="m15.8 13.5l-5.4-5.5 5.5-5.4c.2-.2.2-.6 0-.8l-1.6-1.6c-.1-.1-.3-.2-.4-.2-.2 0-.3.1-.4.2l-5.5 5.4-5.5-5.4c-.1-.1-.2-.2-.4-.2s-.3.1-.4.2l-1.5 1.5c-.2.2-.2.6 0 .8l5.4 5.5-5.5 5.5c0 .1-.1.2-.1.4 0 .2.1.3.2.4l1.6 1.6c.1.1.2.1.4.1.1 0 .3-.1.4-.2l5.4-5.4 5.4 5.5c.1.1.3.2.4.2.1 0 .3-.1.4-.2l1.6-1.6c.1-.1.2-.3.2-.4 0-.2-.1-.3-.2-.4"></path></svg>':'<img src="'+(e?h:f)+'" alt="" class="'+s+'"/>')+"</span>"},createPopupDOM:function(){return e('<div class="goodpopup js-goodpopup"><div class="goodpopup-inner"><div class="goodpopup-inner-content js-goodpopup-inner-content"></div></div></div>').appendTo("body").promise().done(function(){n=e(".js-goodpopup"),t=n.find(".js-goodpopup-inner-content")})},renderPopupContentDOM:function(e,n,t,o,p){return'<div class="goodpopup-inner-content-element '+(o?l:"")+" "+(p?d:"")+'" data-popup-id="'+e+'">'+I.renderPopupContentTemplateDOM(n,t,o,p)+"</div>"},renderPopupContentTemplateDOM:function(e,n,t,o){return Handlebars.compile(e)("object"!=typeof n?{}:n)+(t?I.closeButtonMarkup(o):"")}},w={handleKeydown:function(e){for(var n=this.getOptions().keyCodeForClosing,t=0;t<n.length;t++)if(e.keyCode===n[t]){m.close.call(this,this.getOptions().forceClosing.keydown);break}return this},handleOuterClick:function(n){var t=e(n.target);return this.getOptions().isOuterClickClosing&&0===t.parents(".js-goodpopup-inner-content").length&&!t.hasClass(i)&&m.close.call(this,this.getOptions().forceClosing.click),this}},m={open:function(){var n=this;if(C)if(n.isRendered()){if(!n.isHidden())return n;e.each(A,function(e,t){if(t.instance.isRendered()&&!t.instance.isHidden())return m._hide.call(t.instance,function(){n.getOptions().callbackBeforeOpen.call(n),m._show.call(n)}),!1})}else e.each(A,function(e,t){if(t.instance.isRendered()&&!t.instance.isHidden())return m._hide.call(t.instance,function(){n.getOptions().callbackBeforeOpen.call(n),m._renderContent.call(n)}),!1});else n.getOptions().callbackBeforeOpen.call(n),m._renderContent.call(n);return n},close:function(e){var n=this;if(!C||!n.isRendered())return n;var t=e||!1;if(P.length>0)if(t){for(var o=P.length;o>0;o--)m._destroyContent.call(P[o-1].instance,!1);m._destroyContent.call(n,!0)}else m._destroyContent.call(n,!1,function(){P[P.length-1].instance.getOptions().callbackBeforeOpen.call(P[P.length-1].instance),m._show.call(P[P.length-1].instance)});else m._destroyContent.call(n,!0);return n},_renderContent:function(){var o=this;if(o.isRendered()&&!o.getOptions().isIframe&&!o.getOptions().isPrerendered)return o;var s=function(){if(A[o.getPopupId()].$popupClose=A[o.getPopupId()].$popupContent.find("."+i),A[o.getPopupId()].$popupClose.on("click."+p,function(){m.close.call(o,o.getOptions().forceClosing.button)}),e(document).off("keydown."+p).on("keydown."+p,function(e){w.handleKeydown.call(o,e)}),n.off("click."+p).on("click."+p,function(e){w.handleOuterClick.call(o,e)}),C)v.whichTransitionEvent&&A[o.getPopupId()].$popupContent.off(v.whichTransitionEvent+".pluginSuffix").on(v.whichTransitionEvent+".pluginSuffix",function(e){e.target===A[o.getPopupId()].$popupContent[0]&&(A[o.getPopupId()].$popupContent.off(v.whichTransitionEvent+".pluginSuffix"),o.getOptions().callbackAfterOpen.call(o))}),setTimeout(function(){A[o.getPopupId()].$popupContent.removeClass(g)},1),v.whichTransitionEvent||o.getOptions().callbackAfterOpen.call(o),A[o.getPopupId()].isRendered=!0,A[o.getPopupId()].isHidden=!1,C=!0;else{var t=e("body").width();e("html").addClass("noscroll"),e("body").width()>t&&e("html").addClass("noscroll-margin").css("margin-right",parseFloat(e("html").css("margin-right"))+O+"px"),v.whichTransitionEvent&&n.off(v.whichTransitionEvent+".pluginSuffix").on(v.whichTransitionEvent+".pluginSuffix",function(e){e.target===n[0]&&(n.off(v.whichTransitionEvent+".pluginSuffix"),o.getOptions().callbackAfterOpen.call(o))}),n.addClass(u),v.whichTransitionEvent||o.getOptions().callbackAfterOpen.call(o),A[o.getPopupId()].isRendered=!0,A[o.getPopupId()].isHidden=!1,C=!0}};return o.getOptions().isPrerendered||(o.getOptions().isDetachable||o.getOptions().isIframe?0===A[o.getPopupId()].$popupContent.length&&(A[o.getPopupId()].$popupContent=e(I.renderPopupContentDOM(o.getPopupId(),o.getTemplate().html(),o.getOptions().data,o.getOptions().hasCloseButton,o.getOptions().isFullWidth))):A[o.getPopupId()].$popupContent=e(I.renderPopupContentDOM(o.getPopupId(),o.getTemplate().html(),o.getOptions().data,o.getOptions().hasCloseButton,o.getOptions().isFullWidth))),C&&A[o.getPopupId()].$popupContent.addClass(g),!o.getOptions().isPrerendered&&!o.getOptions().isIframe||o.getOptions().isIframe&&!o.isRendered()?t.append(A[o.getPopupId()].$popupContent).promise().done(function(){s()}):(o.getOptions().isPrerendered&&o.setOptions({isPrerendered:!1}),A[o.getPopupId()].$popupContent.removeClass(c+" "+a),s()),o},_rerenderContent:function(n){var t=this,o=A[t.getPopupId()].$popupContent;return A[t.getPopupId()].$popupClose.off("click."+p),A[t.getPopupId()].$popupContent=e(I.renderPopupContentDOM(t.getPopupId(),t.getTemplate().html(),t.getOptions().data,t.getOptions().hasCloseButton,t.getOptions().isFullWidth)),A[t.getPopupId()].$popupContent.addClass(c+" "+a),o.after(A[t.getPopupId()].$popupContent).promise().done(function(){o.remove(),A[t.getPopupId()].$popupClose=A[t.getPopupId()].$popupContent.find("."+i),"function"==typeof n&&n()}),t},_destroyContent:function(t,o){var i,s=this;if(!s.isRendered())return s;s.getOptions().callbackBeforeClose.call(s);for(var l=0;l<P.length;l++)if(P[l].instance===s){P.splice(l,1);break}return void 0!==t&&t?(i=function(){s.getOptions().isIframe?A[s.getPopupId()].$popupContent.addClass(c+" "+a).removeClass(r):s.getOptions().isDetachable?A[s.getPopupId()].$popupContent.detach().removeClass(c+" "+a+" "+g+" "+r):(A[s.getPopupId()].$popupContent.remove(),A[s.getPopupId()].$popupContent=e()),s.getOptions().callbackAfterClose.call(s)},n.off("click."+p),e(document).off("keydown."+p),A[s.getPopupId()].$popupClose.off("click."+p),v.whichTransitionEvent&&n.off(v.whichTransitionEvent+".pluginSuffix").on(v.whichTransitionEvent+".pluginSuffix",function(e){e.target===n[0]&&(n.off(v.whichTransitionEvent+".pluginSuffix"),i())}),n.removeClass(u),v.whichTransitionEvent||i(),e("html").removeClass("noscroll"),e("html").hasClass("noscroll-margin")&&e("html").css("margin-right",parseFloat(e("html").css("margin-right"))-O+"px").removeClass("noscroll-margin"),C=!1,A[s.getPopupId()].isHidden=!1,s.getOptions().isIframe||(A[s.getPopupId()].isRendered=!1)):(i=function(){s.getOptions().isIframe?A[s.getPopupId()].$popupContent.addClass(c+" "+a).removeClass(r):s.getOptions().isDetachable?A[s.getPopupId()].$popupContent.detach().removeClass(c+" "+a+" "+g+" "+r):(A[s.getPopupId()].$popupContent.remove(),A[s.getPopupId()].$popupContent=e()),s.getOptions().callbackAfterClose.call(s),"function"==typeof o&&o()},A[s.getPopupId()].$popupClose.off("click."+p),A[s.getPopupId()].isHidden?(A[s.getPopupId()].isHidden=!1,s.getOptions().isIframe||(A[s.getPopupId()].isRendered=!1),i()):(v.whichTransitionEvent&&A[s.getPopupId()].$popupContent.off(v.whichTransitionEvent+".pluginSuffix").on(v.whichTransitionEvent+".pluginSuffix",function(e){e.target===A[s.getPopupId()].$popupContent[0]&&(A[s.getPopupId()].$popupContent.off(v.whichTransitionEvent+".pluginSuffix"),i())}),A[s.getPopupId()].$popupContent.addClass(r),v.whichTransitionEvent||i(),A[s.getPopupId()].isHidden=!1,s.getOptions().isIframe||(A[s.getPopupId()].isRendered=!1))),s},_show:function(){var t=this;if(!t.isHidden())return t;for(var o=0;o<P.length;o++)if(P[o].instance===t){P.splice(o,1);break}function i(){var o=function(){e(document).off("keydown."+p).on("keydown."+p,function(e){w.handleKeydown.call(t,e)}),n.off("click."+p).on("click."+p,function(e){w.handleOuterClick.call(t,e)}),A[t.getPopupId()].$popupClose.off("click."+p).on("click."+p,function(){m.close.call(t,t.getOptions().forceClosing.button)}),t.getOptions().callbackAfterOpen.call(t)};v.whichTransitionEvent&&A[t.getPopupId()].$popupContent.off(v.whichTransitionEvent+".pluginSuffix").on(v.whichTransitionEvent+".pluginSuffix",function(e){e.target===A[t.getPopupId()].$popupContent[0]&&(A[t.getPopupId()].$popupContent.off(v.whichTransitionEvent+".pluginSuffix"),o())}),setTimeout(function(){A[t.getPopupId()].$popupContent.removeClass(a+" "+c)},1),v.whichTransitionEvent||o(),A[t.getPopupId()].isHidden=!1}return t.getOptions().isDetachable||t.getOptions().isIframe?i():m._rerenderContent.call(t,function(){i()}),t},_hide:function(t){var o=this;if(o.isHidden())return o;function i(){A[o.getPopupId()].$popupContent.addClass(a),o.getOptions().callbackAfterClose.call(o),"function"==typeof t&&t()}return o.getOptions().callbackBeforeClose.call(o),e(document).off("keydown."+p),n.off("click."+p),A[o.getPopupId()].$popupClose.off("click."+p),v.whichTransitionEvent&&A[o.getPopupId()].$popupContent.off(v.whichTransitionEvent+".pluginSuffix").on(v.whichTransitionEvent+".pluginSuffix",function(e){e.target===A[o.getPopupId()].$popupContent[0]&&(A[o.getPopupId()].$popupContent.off(v.whichTransitionEvent+".pluginSuffix"),i())}),A[o.getPopupId()].$popupContent.addClass(c),v.whichTransitionEvent||i(),P.push(A[o.getPopupId()]),A[o.getPopupId()].isHidden=!0,o}};e.goodpopup={getPopup:function(e){return"undefined"!=typeof A[e]&&"undefined"!=typeof A[e].instance?A[e].instance:void 0!==e&&v.throwError(e,"NOT_FOUND")},getPopups:function(){return A},version:"2.0.0-beta.16"},e.fn.goodpopup=function(n){return this.each(function(o,u){var r=e(u),g=r.attr("id"),C="undefined"!=typeof A[g]&&"undefined"!=typeof A[g].instance?A[g].instance:undefined;void 0===C?(A[g]={instance:undefined,isRendered:!1,isHidden:!1,$popupClose:e(),$popupContent:e()},A[g].instance=new function(n,o){var u=this,r=n.attr("id"),g=o;return this.getOptions=function(){return g},this.getPopupId=function(){return r},this.getPopupContent=function(){return A[u.getPopupId()].$popupContent},this.getTemplate=function(){return n},this.isRendered=function(){return A[u.getPopupId()].isRendered},this.isHidden=function(){return A[u.getPopupId()].isHidden},this.setOptions=function(n){return e.isPlainObject(n)?n.hasOwnProperty("forceClosing")&&!e.isPlainObject(n.forceClosing)?v.throwError(r,"WRONG_OPTIONS",n):(n.hasOwnProperty("hasCloseButton")&&n.hasCloseButton!==u.getOptions().hasCloseButton&&u.getPopupContent()&&(n.hasCloseButton?(A[u.getPopupId()].$popupContent.addClass(l).append(I.closeButtonMarkup(u.getOptions().isFullWidth)),A[u.getPopupId()].$popupClose=A[u.getPopupId()].$popupContent.find("."+i),A[u.getPopupId()].$popupClose.off("click."+p).on("click."+p,function(){m.close.call(u,u.getOptions().forceClosing.button)})):(A[u.getPopupId()].$popupClose&&0!==A[u.getPopupId()].$popupClose.length||(A[u.getPopupId()].$popupClose=A[u.getPopupId()].$popupContent.find("."+i)),A[u.getPopupId()].$popupClose.remove(),A[u.getPopupId()].$popupContent.removeClass(l))),n.hasOwnProperty("isFullWidth")&&n.isFullWidth!==u.getOptions().isFullWidth&&u.getPopupContent()&&(n.isFullWidth?(A[u.getPopupId()].$popupContent.addClass(d),A[u.getPopupId()].$popupContent.find("."+s).attr("src",h)):(A[u.getPopupId()].$popupContent.removeClass(d),A[u.getPopupId()].$popupContent.find("."+s).attr("src",f))),n.hasOwnProperty("keyForClosing")&&n.keyCodeForClosing!==u.getOptions().keyCodeForClosing&&"number"==typeof n.keyCodeForClosing&&(n.keyCodeForClosing=[n.keyCodeForClosing]),g=e.extend({},g,n),u):v.throwError(r,"WRONG_OPTIONS",n)},this.open=function(){return m.open.call(this)},this.close=function(e){return m.close.call(this,e)},u.getOptions().isPrerendered&&(A[u.getPopupId()].$popupContent=e(I.renderPopupContentDOM(u.getPopupId(),u.getTemplate().html(),u.getOptions().data,u.getOptions().hasCloseButton,u.getOptions().isFullWidth)),A[u.getPopupId()].$popupClose=A[u.getPopupId()].$popupContent.find("."+i),A[u.getPopupId()].$popupContent.addClass(c+" "+a),t.append(A[u.getPopupId()].$popupContent),A[u.getPopupId()].isRendered=!0,A[u.getPopupId()].isHidden=!0),u.getTemplate().data("goodpopup",u),u}(r,e.extend({},{callbackBeforeOpen:function(){},callbackAfterOpen:function(){},callbackBeforeClose:function(){},callbackAfterClose:function(){},isPrerendered:!1,isIframe:!1,isDetachable:!1,isOuterClickClosing:!0,isFullWidth:!1,hasCloseButton:!0,keyCodeForClosing:[27],forceClosing:{click:!0,keydown:!0,button:!1},data:{}},n,r.data()))):C.setOptions.call(C,n)})};e(function(){v.calculateScrollbarWidth(),I.createPopupDOM().done(function(){e("script[type='text/x-handlebars-template']").goodpopup()})})}(jQuery);
//# sourceMappingURL=script.min.js.map